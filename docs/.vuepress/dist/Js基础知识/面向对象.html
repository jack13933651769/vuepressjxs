<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对象、类、与面向对象编程 | 蒋鲜生の前端学习笔记</title>
    <meta name="generator" content="VuePress 1.5.1">
    
    <meta name="description" content="这是一个总结前端知识的网站鸭！">
    <link rel="preload" href="/iview/notes/assets/css/0.styles.0b4762c8.css" as="style"><link rel="preload" href="/iview/notes/assets/js/app.89b4b570.js" as="script"><link rel="preload" href="/iview/notes/assets/js/2.9411c5eb.js" as="script"><link rel="preload" href="/iview/notes/assets/js/14.fec842a6.js" as="script"><link rel="prefetch" href="/iview/notes/assets/js/10.5f2c0e22.js"><link rel="prefetch" href="/iview/notes/assets/js/11.b413a12e.js"><link rel="prefetch" href="/iview/notes/assets/js/12.73f2d2fc.js"><link rel="prefetch" href="/iview/notes/assets/js/13.b8ce8655.js"><link rel="prefetch" href="/iview/notes/assets/js/15.246d9d61.js"><link rel="prefetch" href="/iview/notes/assets/js/16.b52015ed.js"><link rel="prefetch" href="/iview/notes/assets/js/17.da313f3f.js"><link rel="prefetch" href="/iview/notes/assets/js/18.13018aea.js"><link rel="prefetch" href="/iview/notes/assets/js/19.803445dc.js"><link rel="prefetch" href="/iview/notes/assets/js/20.a9fe4b1d.js"><link rel="prefetch" href="/iview/notes/assets/js/21.4fffc1de.js"><link rel="prefetch" href="/iview/notes/assets/js/22.ffaa676b.js"><link rel="prefetch" href="/iview/notes/assets/js/23.e62ca486.js"><link rel="prefetch" href="/iview/notes/assets/js/24.5f8895fc.js"><link rel="prefetch" href="/iview/notes/assets/js/25.b0bfa950.js"><link rel="prefetch" href="/iview/notes/assets/js/26.26a587c1.js"><link rel="prefetch" href="/iview/notes/assets/js/27.5c706c50.js"><link rel="prefetch" href="/iview/notes/assets/js/28.11d9952a.js"><link rel="prefetch" href="/iview/notes/assets/js/29.e3fe3098.js"><link rel="prefetch" href="/iview/notes/assets/js/3.b2387403.js"><link rel="prefetch" href="/iview/notes/assets/js/4.99a4fa62.js"><link rel="prefetch" href="/iview/notes/assets/js/5.8cc516eb.js"><link rel="prefetch" href="/iview/notes/assets/js/6.81d550b1.js"><link rel="prefetch" href="/iview/notes/assets/js/7.e68cbb3b.js"><link rel="prefetch" href="/iview/notes/assets/js/8.587e6838.js"><link rel="prefetch" href="/iview/notes/assets/js/9.d3eefc68.js">
    <link rel="stylesheet" href="/iview/notes/assets/css/0.styles.0b4762c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/iview/notes/" class="home-link router-link-active"><!----> <span class="site-name">蒋鲜生の前端学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/iview/notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/iview/notes/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/iview/notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/iview/notes/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview/notes/" aria-current="page" class="sidebar-link">关于我</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css动效</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Js基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview/notes/Js基础知识/string对象.html" class="sidebar-link">string对象</a></li><li><a href="/iview/notes/Js基础知识/变量作用域与内存.html" class="sidebar-link">变量,作用域与内存</a></li><li><a href="/iview/notes/Js基础知识/变量声明.html" class="sidebar-link">代码规范及变量声明</a></li><li><a href="/iview/notes/Js基础知识/基本引用类型.html" class="sidebar-link">基本引用类型</a></li><li><a href="/iview/notes/Js基础知识/操作符及语句.html" class="sidebar-link">语句</a></li><li><a href="/iview/notes/Js基础知识/数据类型.html" class="sidebar-link">数据类型</a></li><li><a href="/iview/notes/Js基础知识/集合引用类型.html" class="sidebar-link">集合引用类型</a></li><li><a href="/iview/notes/Js基础知识/面向对象.html" class="active sidebar-link">对象、类、与面向对象编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iview/notes/Js基础知识/面向对象.html#创建对象的几种方法" class="sidebar-link">创建对象的几种方法</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React基础知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>./docs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>sql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端常见面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工作笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用软件及网站和前端插件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每天一个英语题型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每日一个面试题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>移动端配置</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="对象、类、与面向对象编程"><a href="#对象、类、与面向对象编程" class="header-anchor">#</a> 对象、类、与面向对象编程</h1> <ol><li>属性类型 -这些都是js内部引擎的规范定义不能改变
分为：数据属性和访问器属性
[[Configurable]] 是否可以通过delete删除 并重新定义，是否可以修改它的特性，以及是否可以把它改成访问器属性，默认 是true</li></ol> <p>[[Enumerable]] 表示属性是否可以通过for-in循环返回。直接定义在对象的属性的这个特性都是true</p> <p>[[Writable]] 表示属性的值是否可以被修改，默认为true</p> <p>[[Value]] 包含属性实际的值。读取和写入的位置，默认为undefined</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*要修改默认属性的默认特性
必须使用 Object.defineProperty() 这个方法 接收3个参数

要给其添加属性的对象
属性的名称
一个描述符对象（描述符对象上的属性包含） configurable\enumerable\writable\value
跟相关特性的名称一一对应。根据需要修改的特性，可以设置其中一个或多个值
*/</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    writable<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span><span class="token string">&quot;Nicholas&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Greg'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>preson<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment">//Nicholas</span>
<span class="token keyword">delete</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>    <span class="token comment">//类似规则也适用于创建不可配置的属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>preson<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment">//Nicholas</span>

<span class="token comment">/*
访问器属性
访问器属性不包含数据值， 他们包含  gtter setter 函数，不够这两个函数不是必需的。
[[Configurable]] 表示属性是否可以通过delete删除并重新定义，是否可以修改它的特性，以及是否可以把它改为数据属性。默认这个属性为true
[[Enumerable]] 是否可以通过 for-in循环返回。 默认true
[[Get]] 获取函数，在读取属性时调用， 默认值为undefined
[[Set]] 设置函数，在写入属性时调用，默认undefined
*/</span>

<span class="token comment">/*
访问器属性是不能直接定义的，必须使用Object.defineProperty()
*/</span>
<span class="token comment">//定义一个对象，包含伪私有成员year_那公共成员edition</span>
<span class="token keyword">let</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
    year_<span class="token operator">:</span><span class="token number">2017</span><span class="token punctuation">,</span>
    edition<span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>year_<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>newValue <span class="token operator">&gt;</span> <span class="token number">2017</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>year_ <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>edition <span class="token operator">+=</span> newValue <span class="token operator">-</span> <span class="token number">2017</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
book<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token number">2018</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>edition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2</span>
<span class="token comment">//</span>

<span class="token comment">/*
定义多个属性
Object.defineProperties()
这个方法可以通过多个描述符一次性定义多个属性
2个参数，（要为之添加或者修改属性的对象，另一个描述符对象，其属性与要添加和修改的属性一一对应。）
*/</span>
<span class="token keyword">let</span> look <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span><span class="token punctuation">{</span>
    year_<span class="token operator">:</span><span class="token punctuation">{</span>
        value<span class="token operator">:</span><span class="token number">2017</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    edition<span class="token operator">:</span><span class="token punctuation">{</span>
        value<span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>year_<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>newValue <span class="token operator">&gt;</span><span class="token number">2017</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>year_ <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>edition <span class="token operator">+=</span> newValue <span class="token operator">-</span> <span class="token number">2017</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
Object.getOwnPropertyDescriptor()
 * 读取属性
 * @param  {obj}   对象     属性所在的对象
 * @param  {str}   字符串      要取得其描述符得属性名
 * @param {obj}  返回是对象  根据属性类型不同 返回得 属性也不同
*/</span>
<span class="token keyword">let</span> book <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span><span class="token punctuation">{</span>
    year_<span class="token operator">:</span><span class="token punctuation">{</span>
        value<span class="token operator">:</span><span class="token number">2017</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    edition<span class="token operator">:</span><span class="token punctuation">{</span>
        value<span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>year_<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>newValue <span class="token operator">&gt;</span> <span class="token number">2017</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>year_ <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>edition <span class="token operator">+=</span> newValue <span class="token operator">-</span> <span class="token number">2017</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span><span class="token string">&quot;year_&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*

*/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//es2017出的方法    会在每个自有属性上调用Object.getOwnPropertyDescriptor()并在一个新对象中返回它们</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 合并
 * 
 * assign() 
 * @param {obj}  返回是对象  一个或多个对象
 * 
 * 先把每个原对象   Object.propertyIsEnumerable()返回true
 * 和自有对象的Object.hasOwnProperty()返回true）属性复制到目标对象
 * 使用原对象的get 目标对象的set
 * 
 * 对对象操作是浅复制， 如果多个源对象都有相同的属性，则使用最后一个复制的值
 */</span>

<span class="token keyword">let</span> dest<span class="token punctuation">,</span>src<span class="token punctuation">,</span>result<span class="token punctuation">;</span>

dest <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">'dest'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">'src1'</span><span class="token punctuation">,</span>a<span class="token operator">:</span><span class="token string">'foo'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">'src2'</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//会覆盖之前相同的属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reslut<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{ id: src2, a: foo, b: bar }</span>


<span class="token comment">// 可以通过目标对象上的设置函数观察到覆盖的过程：</span>
dest <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">set</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'first'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'second'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'third'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// first</span>
<span class="token comment">// second</span>
<span class="token comment">// third</span>

<span class="token keyword">let</span> dest <span class="token punctuation">,</span>src <span class="token punctuation">,</span>result<span class="token punctuation">;</span>
<span class="token comment">/**
 *  错误处理
*/</span>
dest <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
src <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Object.assign()在调用这个获取函数时会抛出错误</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token operator">:</span><span class="token string">'bar'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span>src<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">// Object.assign()没办法回滚已经完成的修改</span>
<span class="token comment">// 因此在抛出错误之前，目标对象上已经完成的修改会继续存在：</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: foo }</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//对象的标识及相等判定</span>

<span class="token comment">//这些是 === 符合预期的情况</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span> <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
<span class="token comment">// 这些情况在不同JavaScript引擎中表现不同，但仍被认为相等</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>

<span class="token comment">// 要确定NaN的相等性，必须使用极为讨厌的isNaN()</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>


<span class="token comment">//ES6 新增了 Object.is() 和===很像</span>

<span class="token comment">/**
 * 判断是否相等
 * 
 * is() 
 * @param {obj}  传参2个对象
 * 
 */</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>

<span class="token comment">// 正确的0、-0、+0相等/不等判定</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// false</span>

<span class="token comment">// 正确的NaN相等判定</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">//如果要检查多个值，递归地利用相等性传递即可</span>

<span class="token keyword">function</span> <span class="token function">recursivelyCheckEqual</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span><span class="token operator">...</span>rest</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>rest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
            <span class="token punctuation">(</span>rest<span class="token punctuation">.</span>lengt <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token function">recursivelyCheckEqual</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>es6 属性值简写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Matt'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//name:name </span>
    name
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>es6 可计算属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//old 之前想动态定义对象key值 需要这么做</span>
<span class="token keyword">const</span> namekEY <span class="token operator">=</span> <span class="token string">'name'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ageKey <span class="token operator">=</span> <span class="token string">'age'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
person<span class="token punctuation">[</span>nameKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Matt'</span><span class="token punctuation">;</span>
person<span class="token punctuation">[</span>ageKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// {name:'Matt',age:27}</span>

<span class="token comment">//new  es6 现在动态定义可以这么写</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>nameKey<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Matt'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>ageKey<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>es6 简写方法名字</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//old es5</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token string">'Matt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//My name is Matt</span>
<span class="token comment">//new es6</span>
<span class="token keyword">const</span> methodKey <span class="token operator">=</span> <span class="token string">'sayName'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">[</span>methodKey<span class="token punctuation">]</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 简写方法名与可计算属性健相互兼容</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1212'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//配合计算属性本身可以是复杂的表达式</span>

<span class="token keyword">const</span> nameKey <span class="token operator">=</span> <span class="token string">'name'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ageKey <span class="token operator">=</span> <span class="token string">'age'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jobKey <span class="token operator">=</span> <span class="token string">'job'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> uniqueToken <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getUniqueKey</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uniqueToken<span class="token operator">++</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token function">getUniqueKey</span><span class="token punctuation">(</span>nameKey<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Matt'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">getUniqueKey</span><span class="token punctuation">(</span>ageKey<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">getUniqueKey</span><span class="token punctuation">(</span>jobKey<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Software engineer'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { name_0: 'Matt', age_1: 27, job_2: 'Software engineer' }</span>
</code></pre></div><p>对象解构</p> <p>1.解构 同名可以省略 <br>
2.解构可以结构对象属性和方法，把源数据结构转换为对象，但是null和undefined不能被解构<br>
3.解构 可以同时进行定义默认值<br>
4.解构 不要求变量必须在解构表达式种声明，如果是事先声明，解构表达式必须包含在一对括号中<br>
5.嵌套解构 解构对于嵌套属性或赋值目标没有限制，可以通过复制对象属性（浅拷贝）<br>
6.嵌套解构 可以使用嵌套结构进行解构<br>
7.嵌套解构 外层属性没定义 源对象/目标对象都不能使用<br>
8.对象解构 如果解构中途出错，只会部分解构<br>
9.对象解构 在函数参数列表解构，不会对arguments有影响<br></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Matt'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Matt</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//27</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//可以在解构 时候进行 同时进行定义默认值</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Matt'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>job<span class="token operator">=</span><span class="token string">'Software engineer'</span><span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Matt</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Software engineer</span>
</code></pre></div><h2 id="创建对象的几种方法"><a href="#创建对象的几种方法" class="header-anchor">#</a> 创建对象的几种方法</h2> <h3 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h3> <ol><li>大众化 应用于软件工程</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'nicholas'</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token string">&quot;Software Engineer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'Greg'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token string">&quot;Doctor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nicholas'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">&quot;police&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>new 操作符都做了什么</p> <p>(1) 在内存中创建一个新对象。</p> <p>(2) 这个新对象内部的[[Prototype]]特性被赋值为构造函数的prototype属性。</p> <p>(3) 构造函数内部的this被赋值为这个新对象（即this指向新对象）。</p> <p>(4) 执行构造函数内部的代码（给新对象添加属性）。</p> <p>(5) 如果构造函数返回非空对象，则返回该对象；否则，返回刚创建的新对象。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iview/notes/Js基础知识/集合引用类型.html" class="prev">
        集合引用类型
      </a></span> <span class="next"><a href="/iview/notes/React基础知识/r.html">
        /React基础知识/r.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/iview/notes/assets/js/app.89b4b570.js" defer></script><script src="/iview/notes/assets/js/2.9411c5eb.js" defer></script><script src="/iview/notes/assets/js/14.fec842a6.js" defer></script>
  </body>
</html>
